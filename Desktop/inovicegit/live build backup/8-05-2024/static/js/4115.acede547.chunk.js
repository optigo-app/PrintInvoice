"use strict";(self.webpackChunkinvoice=self.webpackChunkinvoice||[]).push([[4115],{38647:(e,s,i)=>{i.r(s),i.d(s,{default:()=>c});var d=i(72791),l=(i(18549),i(1683)),t=i(80444),n=i(76522),a=i(80184);const c=e=>{let{urls:s,token:i,invoiceNo:c,printName:o,evn:r,ApiVer:h}=e;const{toPDF:v,targetRef:m}=(0,n.Eb)({filename:"page.pdf"}),[x,u]=(0,d.useState)({}),[p,N]=(0,d.useState)([]),[j,f]=(0,d.useState)({}),[g,b]=(0,d.useState)(!0),[M,W]=(0,d.useState)(""),[w,P]=(0,d.useState)([]),[S,R]=(0,d.useState)([]),[y,k]=(0,d.useState)(!0);return(0,d.useEffect)((()=>{(async()=>{try{const e=await(0,l.k_)(i,c,o,s,r,h);if("200"===(null===e||void 0===e?void 0:e.Status)){(0,l.nK)(null===e||void 0===e?void 0:e.Data)?(b(!1),W("Data Not Found")):((e=>{u(null===e||void 0===e?void 0:e.BillPrint_Json[0]);let s=[],i={grsWt:0,netWt:0,Kund:{weight:2.1,pcs:5,Rate:0},Moti:{weight:0,pcs:0,Rate:0},Bmoti:{weight:0,pcs:0,Rate:0},MOPs:{weight:0,pcs:0,Rate:0},Stone:{weight:0,pcs:0,Rate:0},Mina:{weight:0,pcs:0,Rate:0},Bandai:{weight:0,pcs:0,Rate:0},fineWeight:0,amount:0,MetalPriceRatio:0,Wastage:0,lessWeight:0},d=[];null===e||void 0===e||e.BillPrint_Json1.forEach(((l,t)=>{let n=0,a=0,c=0,o=(null===l||void 0===l?void 0:l.LossWt)+(null===l||void 0===l?void 0:l.NetWt);i.grsWt+=null===l||void 0===l?void 0:l.grosswt,i.netWt+=(null===l||void 0===l?void 0:l.NetWt)+(null===l||void 0===l?void 0:l.LossWt),i.MetalPriceRatio+=null===l||void 0===l?void 0:l.MetalPriceRatio,i.Wastage+=null===l||void 0===l?void 0:l.Wastage,i.amount+=null===l||void 0===l?void 0:l.TotalAmount;let r=[];null===e||void 0===e||e.BillPrint_Json2.forEach(((e,s)=>{if(l.SrJobno===e.StockBarcode&&3===(null===e||void 0===e?void 0:e.MasterManagement_DiamondStoneTypeid)){let s=r.findIndex((s=>s.ShapeName===e.ShapeName));-1===s?r.push(e):(r[s].Wt+=null===e||void 0===e?void 0:e.Wt,r[s].Pcs+=null===e||void 0===e?void 0:e.Pcs,r[s].Rate+=null===e||void 0===e?void 0:e.Rate),(0===d.length||d.length<8&&-1===d.findIndex((s=>s.name===(null===e||void 0===e?void 0:e.ShapeName))))&&d.push({name:null===e||void 0===e?void 0:e.ShapeName}),c+=null===e||void 0===e?void 0:e.Amount,a+=+(null===e||void 0===e?void 0:e.Wt).toFixed(3),i.lessWeight+=+(null===e||void 0===e?void 0:e.Wt).toFixed(3)}})),n+=null===l||void 0===l?void 0:l.PureNetWt,i.fineWeight+=null===l||void 0===l?void 0:l.PureNetWt;let h={...l};h.fineWeight=n,h.amount=c,h.lessWeight=a,h.materialMiscs=r,h.netWtWithLossWt=o,s.push(h)}));let l=[];d.forEach(((e,s)=>{l.push({name:null===e||void 0===e?void 0:e.name,Wt:0,Pcs:0,Rate:0})})),d.forEach(((e,i)=>{s.forEach(((s,i)=>{null===s||void 0===s||s.materialMiscs.forEach(((s,i)=>{if((null===e||void 0===e?void 0:e.name)===(null===s||void 0===s?void 0:s.ShapeName)){let e=l.findIndex((e=>e.name===(null===s||void 0===s?void 0:s.ShapeName)));l[e].Wt+=s.Wt,l[e].Pcs+=s.Pcs,l[e].Rate+=s.Rate}}))}))})),R(l),P(d),N(s),i.lessWeight=(null===i||void 0===i?void 0:i.lessWeight).toFixed(3),f(i)})(null===e||void 0===e?void 0:e.Data),b(!1))}else b(!1),W(null===e||void 0===e?void 0:e.Message)}catch(e){console.error(e)}})()}),[]),(0,a.jsx)(a.Fragment,{children:g?(0,a.jsx)(t.Z,{}):""===M?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"container max_width_container container_Misc_1 pad_60_allPrint",children:[(0,a.jsx)("div",{className:"printBtn_sec text-end pt-4 ",children:(0,a.jsx)("input",{type:"button",className:"btn_white blue",value:"Print",onClick:e=>(0,l.Yj)(e)})}),(0,a.jsxs)("div",{ref:m,className:" pt-4",children:[(0,a.jsxs)("div",{className:"header_misc_1 mt-4 border d-flex justify-content-between",children:[(0,a.jsxs)("div",{className:"p-2",children:["Customer Name: ",(0,a.jsxs)("span",{className:"fw-bold",children:[" ",null===x||void 0===x?void 0:x.CustName]})]}),(0,a.jsxs)("div",{className:"p-2 text-end ",children:[(0,a.jsxs)("p",{className:" fw-bold",children:[(0,a.jsx)("span",{className:"fw-normal",children:"Invoice:"})," ",null===x||void 0===x?void 0:x.InvoiceNo]}),(0,a.jsxs)("p",{className:" fw-bold",children:[(0,a.jsx)("span",{className:"fw-normal",children:"Date:"})," ",null===x||void 0===x?void 0:x.EntryDate]})]})]}),(0,a.jsxs)("div",{className:"d-flex border-bottom border-start border-end",children:[(0,a.jsx)("div",{className:"regNoMiscPrint1 border-end p-1 fw-bold d-flex align-items-center justify-content-center",children:"Reg. No."}),(0,a.jsx)("div",{className:"discriptionMisc1 border-end  fw-bold d-flex align-items-center justify-content-center text-center",children:"Description"}),(0,a.jsxs)("div",{className:"grsWtMisc1 border-end p-1 text-end d-flex align-items-center justify-content-center flex-column",children:[(0,a.jsx)("p",{className:"fw-bold",children:"Grs Wt"}),(0,a.jsx)("p",{className:"fw-bold",children:"Net Wt"})]}),(0,a.jsxs)("div",{className:"miscDetailsMicsPrint1",children:[(0,a.jsx)("div",{className:"stoneDetailsMisc1 border-bottom p-1 text-center  fw-bold border-end",children:"Stone Details"}),(0,a.jsxs)("div",{className:"d-flex height53Misc1",children:[w.length>0&&w.map(((e,s)=>(0,a.jsx)("div",{className:"text-end kundMisc1 border-end fw-bold d-flex align-items-center justify-content-center ",children:null===e||void 0===e?void 0:e.name},s))),w.length<8&&Array.from({length:8-w.length},((e,s)=>(0,a.jsx)("div",{className:"text-end kundMisc1 border-end p-1 fw-bold"},s)))]})]}),(0,a.jsx)("div",{className:"lessWtMisc1 border-end p-1 fw-bold text-end d-flex align-items-center justify-content-center",children:"Less Wt."}),(0,a.jsxs)("div",{className:"mperMisc1 border-end p-1 text-center d-flex align-items-center justify-content-center flex-column",children:[(0,a.jsx)("p",{className:"fw-bold text-end",children:"M%"}),(0,a.jsx)("p",{className:"fw-bold text-end",children:"w%"})]}),(0,a.jsx)("div",{className:"fineMisc1 border-end p-1  d-flex align-items-center justify-content-center",children:(0,a.jsx)("p",{className:"fw-bold",children:"Fine Wt"})}),(0,a.jsx)("div",{className:"AmountMiscPrint1 p-1 fw-bold  d-flex align-items-center justify-content-center",children:"Amount"})]}),p.length>0&&p.map(((e,s)=>(0,a.jsxs)("div",{className:"d-flex border-bottom border-start border-end",children:[(0,a.jsx)("div",{className:"regNoMiscPrint1 p-1 border-end text-end",children:null===e||void 0===e?void 0:e.SrJobno}),(0,a.jsx)("div",{className:"discriptionMisc1 border-end p-1 height53Misc1",children:(0,a.jsx)("p",{className:"",children:null===e||void 0===e?void 0:e.SubCategoryname})}),(0,a.jsxs)("div",{className:"grsWtMisc1 border-end p-1 text-end height53Misc1",children:[(0,a.jsx)("p",{className:"",children:(0,l.OP)(null===e||void 0===e?void 0:e.grosswt,3)}),(0,a.jsx)("p",{className:"",children:(0,l.OP)(null===e||void 0===e?void 0:e.netWtWithLossWt,3)})]}),(0,a.jsx)("div",{className:"miscDetailsMicsPrint1",children:(0,a.jsxs)("div",{className:"d-flex height53Misc1",children:[w.length>0&&w.map(((s,i)=>{const d=null===e||void 0===e?void 0:e.materialMiscs.find((e=>(null===s||void 0===s?void 0:s.name)===(null===e||void 0===e?void 0:e.ShapeName)));return d?(0,a.jsxs)("div",{className:"w-100 text-end kundMisc1 border-end p-1",children:[(0,a.jsx)("p",{className:"lh-1 ",children:(0,l.OP)(null===d||void 0===d?void 0:d.Wt,2)}),(0,a.jsx)("p",{className:"lh-1 ",children:(0,l.dl)(null===d||void 0===d?void 0:d.Pcs,0)}),(0,a.jsx)("p",{className:"lh-1 ",children:0!==(null===d||void 0===d?void 0:d.Rate)&&(0,l.dl)(null===d||void 0===d?void 0:d.Rate,2)})]},i):(0,a.jsxs)("div",{className:"w-100 text-end kundMisc1 border-end p-1",children:[(0,a.jsx)("p",{className:"lh-1 "}),(0,a.jsx)("p",{className:"lh-1 "}),(0,a.jsx)("p",{className:"lh-1 "})]},i)})),w.length<8&&Array.from({length:8-w.length},((e,s)=>(0,a.jsxs)("div",{className:"w-100 text-end kundMisc1 border-end p-1",children:[(0,a.jsx)("p",{className:"lh-1 "}),(0,a.jsx)("p",{className:"lh-1 "}),(0,a.jsx)("p",{className:"lh-1 "})]},s)))]})}),(0,a.jsx)("div",{className:"lessWtMisc1 border-end p-1 height53Misc1 text-end",children:(0,l.OP)(null===e||void 0===e?void 0:e.lessWeight,2)}),(0,a.jsxs)("div",{className:"mperMisc1 border-end p-1 text-center height53Misc1",children:[(0,a.jsx)("p",{className:"text-end",children:(0,l.dl)(null===e||void 0===e?void 0:e.MetalPriceRatio,2)}),(0,a.jsx)("p",{className:"text-end",children:(0,l.dl)(null===e||void 0===e?void 0:e.Wastage,2)})]}),(0,a.jsx)("div",{className:"fineMisc1 border-end p-1 text-end height53Misc1 text-end",children:(0,l.OP)(null===e||void 0===e?void 0:e.fineWeight,2)}),(0,a.jsx)("div",{className:"AmountMiscPrint1 p-1 text-end height53Misc1 text-end",children:Math.round(null===e||void 0===e?void 0:e.TotalAmount)})]},s))),(0,a.jsxs)("div",{className:"d-flex border-bottom border-start border-end",children:[(0,a.jsx)("div",{className:"regNoMiscPrint1 p-1 border-end text-end",children:(0,l.dl)(null===p||void 0===p?void 0:p.length,0)}),(0,a.jsx)("div",{className:"discriptionMisc1 border-end p-1 fw-bold height53Misc1",children:"TOTAL"}),(0,a.jsxs)("div",{className:"grsWtMisc1 border-end p-1 text-end height53Misc1",children:[(0,a.jsx)("p",{className:"fw-bold ",children:(0,l.OP)(null===j||void 0===j?void 0:j.grsWt,3)}),(0,a.jsx)("p",{className:"fw-bold ",children:(0,l.OP)(null===j||void 0===j?void 0:j.netWt,3)})]}),(0,a.jsx)("div",{className:"miscDetailsMicsPrint1",children:(0,a.jsxs)("div",{className:"d-flex height53Misc1",children:[w.length>0&&w.map(((e,s)=>{const i=S.find((s=>(null===e||void 0===e?void 0:e.name)===(null===s||void 0===s?void 0:s.name)));return i?(0,a.jsxs)("div",{className:"w-100 text-end kundMisc1 border-end p-1",children:[(0,a.jsx)("p",{className:"lh-1 ",children:(0,l.OP)(null===i||void 0===i?void 0:i.Wt,2)}),(0,a.jsx)("p",{className:"lh-1 ",children:(0,l.dl)(null===i||void 0===i?void 0:i.Pcs,0)})]},s):(0,a.jsxs)("div",{className:"w-100 text-end kundMisc1 border-end p-1",children:[(0,a.jsx)("p",{className:"lh-1 "}),(0,a.jsx)("p",{className:"lh-1 "})]},s)})),w.length<8&&Array.from({length:8-w.length},((e,s)=>(0,a.jsxs)("div",{className:"w-100 text-end kundMisc1 border-end p-1",children:[(0,a.jsx)("p",{className:"lh-1 "}),(0,a.jsx)("p",{className:"lh-1 "})]},s)))]})}),(0,a.jsx)("div",{className:"lessWtMisc1 border-end p-1 fw-bold height53Misc1 text-end",children:(0,l.OP)(null===j||void 0===j?void 0:j.lessWeight,2)}),(0,a.jsxs)("div",{className:"mperMisc1 border-end p-1 text-center height53Misc1",children:[(0,a.jsx)("p",{className:"fw-bold text-end"}),(0,a.jsx)("p",{className:"fw-bold text-end"})]}),(0,a.jsx)("div",{className:"fineMisc1 border-end p-1 text-end height53Misc1",children:(0,a.jsx)("p",{className:"fw-bold text-end",children:(0,l.OP)(null===j||void 0===j?void 0:j.fineWeight,2)})}),(0,a.jsx)("div",{className:"AmountMiscPrint1 p-1 text-end fw-bold height53Misc1 text-end",children:Math.round(null===j||void 0===j?void 0:j.amount)})]})]})]})}):(0,a.jsx)("p",{className:"text-danger fs-2 fw-bold mt-5 text-center w-50 mx-auto",children:M})})}},18549:()=>{}}]);
//# sourceMappingURL=4115.acede547.chunk.js.map